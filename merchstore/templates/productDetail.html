{% extends 'base.html' %}
{% load static %}

<html>

<head>

    <title>{% block title %} Product {{object.name}}{% endblock %}</title>

    {% block styles %}
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap');

        @font-face {
            font-family: "Nunito Sans", sans-serif;
            src: url("nunito-sans.woff2") format("woff2 supports variations"),
                url("nunito-sans.woff2") format("woff2-variations");
            font-weight: 200 1000;
        }

        a {
            text-decoration: underline;
            font-family: "Nunito Sans";
            color: #434D20;
        }
        
        a:hover{
            font-style: italic;
            color: #434D20;
        }

        a.menu {
            text-decoration: none; 
            color: #FFFFE8;
        }

        a.menu:hover {
            font-style: italic;
            color: #FFFFE8
        }

        body {
            font-family: "Nunito Sans";
            background-color: #FFFFE8;
            margin: 3rem;
            color: black;
        }

        button.bottomNav {
            color: #FFFFE8;
            background-color: #434D20;
            font-weight: 600;
            padding: 10px;
            border-radius: 8px;
            border: none;
            width: 200px;
        }

        .stickyMenu {
            position: sticky;
            top: 0;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-evenly;
            padding-top: 4px;
            padding-bottom: 4px;

            background: #434D20;
            color: #FFFFE8;
            /* 
                references: 
                https://www.w3schools.com/HOWTO/howto_js_sticky_header.asp 
                https://www.w3schools.com/css/css3_flexbox_container.asp
            */
        }

        .pageTitle {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-between;
        }

    </style>
{% endblock %}

</head>

<body>

    {% block content %}
    <br>
    <div class="stickyMenu">
        {% if user.is_authenticated %}
            <div><a class="menu" href="{% url 'merchstore:create-product' %}">{{"Add a product"}}</a></div>
            <div><a class="menu" href="{% url 'merchstore:cart' %}">{{"View cart"}}</a></div>
            <div><a class="menu" href="{% url 'merchstore:transactions-list' %}">{{"View transactions"}}</a></div>
        {% endif %}
    </div>

    <div class="pageTitle">
        <div>
            <h1> {{ object.name }} </h1>
        </div>
    </div>
    <hr>

    <br>
    <form method="post">
        {% csrf_token %}
        <label for="amount">
            <span>Amount: </span>
            <input type="number" id="amount" name="amount" min="1" max={{object.stock}}>
        </label>
        {% if request.user.profile == object.owner %}
            <input type="submit" value="Add to cart" disabled="True">
            <br><br>You are the owner of this product. 
            <br>Click <a href="{% url 'merchstore:update-product' pk=object.pk %}">{{"here"}}</a> to update your product listing.
        {% elif object.stock == 0 or object.stock < 0 %}
            <input type="submit" value="Add to cart" disabled="True">
            <br><br> Sorry, this product is currently out of stock.
        {% else %}
            <input type="submit" value="Add to cart">
        {% endif %}
    </form>
    
    <br>
    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Price:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.price}}
    </span>

    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Product Type:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.productType}}
    </span>

    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Stock:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.stock}}
    </span>

    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Status:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.status}}
    </span>

    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Description:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.description}}
    </span>

    <span style="text-align: left; width:29%;  display: inline-block; vertical-align: top;">
        Seller:
    </span>
    <span style="text-align: left; width:70%;  display: inline-block;">
        {{object.owner}}
    </span>

    <!--
        The code snippet above makes use of
        https://stackoverflow.com/questions/12438339/how-may-i-align-text-to-the-left-and-text-to-the-right-in-the-same-line
        for formatting purposes.
    -->

    <br><br><hr><br>
    <button class="bottomNav" type="submit">
        <p><a class="menu" href="{% url 'merchstore:product-list' %}">{{"Back to full item list"}}</a></p>
    </button>

    <br><br>
    {% endblock %}

</body>

</html>